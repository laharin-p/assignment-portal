
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Login | Assignment Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
    background: linear-gradient(135deg, #0d6efd, #6610f2);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
}

.card{
    border-radius:16px;
}

/* ===== LOADING SCREEN ===== */
.loading-overlay{
    position:fixed;
    inset:0;
    background: linear-gradient(135deg, #0d6efd, #6610f2);
    color:white;
    display:none;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    text-align:center;
    z-index:9999;
}

.spinner{
    width:70px;
    height:70px;
    border:6px solid rgba(255,255,255,.3);
    border-top:6px solid #fff;
    border-radius:50%;
    animation:spin 1s linear infinite;
    margin-bottom:20px;
}

@keyframes spin{
    to{transform:rotate(360deg)}
}

.step{
    opacity:.5;
    font-size:.9rem;
    transition:.3s;
}

.step.active{
    opacity:1;
    font-weight:600;
}
</style>
</head>

<body>

<!-- ===== LOADING OVERLAY ===== -->
<div class="loading-overlay" id="loading">

    <div class="spinner"></div>

    <h4 class="mb-2">Preparing your dashboard</h4>
    <p class="mb-4">First load may take a few seconds...</p>

    <div class="step active" id="step1">ğŸ”„ Starting server</div>
    <div class="step" id="step2">ğŸ” Verifying login</div>
    <div class="step" id="step3">ğŸ“š Loading dashboard</div>

</div>

<!-- ===== LOGIN CARD ===== -->
<div class="container">
<div class="row justify-content-center">
<div class="col-11 col-sm-8 col-md-5 col-lg-4">

<div class="card shadow p-4">

<h3 class="text-center mb-1">Student Login</h3>
<p class="text-center text-muted mb-3">Assignment Submission Portal</p>

<!-- ğŸ”´ FLASH MESSAGES -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
    {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category=='error' else category }} text-center py-2">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}
{% endwith %}

<!-- âœ… LOGIN FORM -->
<form method="POST" 
      action="{{ url_for('student_login') }}" 
      onsubmit="return showLoading()">

    <input type="email"
           name="email"
           class="form-control mb-3"
           placeholder="Student Email"
           required>

    <input type="password"
           name="password"
           class="form-control mb-3"
           placeholder="Password"
           required>

    <button type="submit" 
            class="btn btn-primary w-100 py-2"
            id="loginBtn">
        Login
    </button>

</form>

<p class="mt-3 text-center">
    Don't have an account? 
    <a href="{{ url_for('student_register') }}" class="text-decoration-none text-warning">
        Register
    </a>
</p>

</div>
</div>
</div>
</div>

<script>
function showLoading(){

    document.getElementById("loading").style.display="flex";
    document.getElementById("loginBtn").disabled=true;

    setTimeout(()=>{
        document.getElementById("step2").classList.add("active");
    },1000);

    setTimeout(()=>{
        document.getElementById("step3").classList.add("active");
    },2200);

    return true;
}
</script>

</body>
</html>